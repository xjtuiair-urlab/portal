---
// src/components/PublicationCard.astro

// 定义组件接收的参数
interface Props {
  title: string;      // 论文标题
  year: string;       // 年份
  category: string;   // 分类或期刊名 (例如 "Acoustic Inspired")
  image: string;      // 图片路径
  link?: string;      // 链接地址 (可选)
}

const { title, year, category, image, link = "#" } = Astro.props;
---

<a href={link} class="paper-card">
  <!-- 1. 背景图片区域 -->
  <div class="image-wrapper">
    <img src={image} alt={title} />
    <!-- 添加一个渐变遮罩，让底部的文字卡片更突出（可选） -->
    <div class="gradient-overlay"></div>
  </div>

  <!-- 2. 悬浮信息卡片 -->
  <div class="floating-info">
    <div class="accent-bar"></div>
    <div class="text-content">
      <div class="meta">{year} | {category}</div>
      <h3 class="title">{title}</h3>
    </div>
  </div>
</a>

<style>
  /* --- 容器 --- */
  .paper-card {
    display: block;
    position: relative;
    width: 100%;
    /* 保持A4纸比例或者竖向长方形，这里设一个高度 */
    height: 450px; 
    border-radius: 12px;
    overflow: hidden; /* 关键：防止图片放大溢出 */
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    background-color: #f4f7fa; /* 图片加载前的背景色 */
    transition: box-shadow 0.3s ease;
  }

  /* 鼠标悬停整体容器时的阴影变化 */
  .paper-card:hover {
    box-shadow: 0 15px 30px rgba(0,0,0,0.15);
  }

  /* --- 图片区域 --- */
  .image-wrapper {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
  }

  .image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* 保证填满容器 */
    object-position: top center; /* 重点显示论文顶部 */
    transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* 平滑缩放动画 */
  }

  /* 核心交互：鼠标悬停放大图片 */
  .paper-card:hover .image-wrapper img {
    transform: scale(1.1); /* 放大 1.1 倍 */
  }

  /* 可选：底部加一点点黑渐变，防止卡片阴影不够明显 */
  .gradient-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 50%;
    background: linear-gradient(to top, rgba(0,0,0,0.05), transparent);
    pointer-events: none;
  }

  /* --- 悬浮卡片 --- */
  .floating-info {
    position: absolute;
    bottom: 20px;
    left: 20px;
    right: 20px; /* 左右留边，形成悬浮感 */
    background: #ffffff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    display: flex; /* 为了放左边的橙色条 */
    gap: 15px;
    transform: translateY(0);
    transition: transform 0.3s ease;
  }

  /* 鼠标悬停时，卡片轻微上浮一点点，增强互动感 */
  .paper-card:hover .floating-info {
    transform: translateY(-5px);
  }

  /* 橙色竖条 */
  .accent-bar {
    width: 4px;
    background-color: var(--accent-orange, #f58220); /* 使用全局变量，如果没有则用默认橙色 */
    border-radius: 2px;
    flex-shrink: 0; /* 防止被挤压 */
  }

  .text-content {
    flex: 1;
  }

  .meta {
    font-size: 14px;
    color: var(--text-light, #666); /* 使用全局变量 */
    font-weight: 500;
    margin-bottom: 8px;
  }

  .title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-dark, #333);
    line-height: 1.4;
    margin: 0;
    
    /* 限制标题最多显示 3 行，超出省略号 */
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 移动端适配 */
  @media (max-width: 768px) {
    .paper-card { height: 400px; }
    .title { font-size: 16px; }
  }
</style>
